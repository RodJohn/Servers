

#概述

	容器是独立运行的一个或一组应用，以及它们的运行态环境


#启动


##新建并启动

###命令

```
 docker run <option>
```

Docker 在后台运行的标准操作包括：

```
检查本地是否存在指定的镜像，不存在就从公有仓库下载
利用镜像创建并启动一个容器
分配一个文件系统，并在只读的镜像层外面挂载一层可读写层
从宿主主机配置的网桥接口中桥接一个虚拟接口到容器中去
从地址池配置一个 ip 地址给容器
执行用户指定的应用程序
执行完毕后容器被终止
```

###示例

下面的命令输出一个 “Hello World”，之后终止容器。

```
$ docker run ubuntu:14.04 /bin/echo 'Hello world'
Hello world
```

###交互启动

下面的命令则启动一个 bash 终端，允许用户进行交互。

```
$ docker run -t -i ubuntu:14.04 /bin/bash
root@af8bae53bdd3:/#
其中，-t 选项让Docker分配一个伪终端（pseudo-tty）并绑定到容器的标准输入上， -i 则让容器的标准输入保持打开。
```

###后台运行



	使用了 -d 参数运行容器让 Docker 在后台运行。
	使用 -d 参数启动后会返回一个唯一的 id

```
$ docker run -d ubuntu:17.10 /bin/sh -c "while true; do echo hello world; sleep 1; done"
77b2dc01fe0f3f1265df143181e7b9af5e05279a884f4776ee75350ea9d8017a
```
此时容器会在后台运行并不会把输出的结果 (STDOUT) 打印到宿主机上面(输出结果可以用 docker logs 查看)。

注： 容器是否会长久运行，是和 docker run 指定的命令有关，和 -d 参数无关。

，也可以通过 docker container ls 命令来查看容器信息。


#查看

	用 docker container ls -a 命令

```
这里写代码片
```
终止状态的容器可以用 docker container ls -a 命令看到。例如

```
docker ps -a
CONTAINER ID        IMAGE                    COMMAND                CREATED             STATUS                          PORTS               NAMES
ba267838cc1b        ubuntu:14.04             "/bin/bash"            30 minutes ago      Exited (0) About a minute ago                       trusting_newton
98e5efa7d997        training/webapp:latest   "python app.py"        About an hour ago   Exited (0) 34 minutes ago                           backstabbing_pike
```




#停止

	当 Docker 容器中指定的应用终结时，容器也自动终止。
	例如只启动了一个终端的容器，用户通过 exit 命令或 Ctrl+d 来退出终端时，所创建的容器立刻终止。

```
docker container stop 	 来终止一个运行中的容器。
docker container start     来重新启动处于终止状态的容器
docker container restart  命令会将一个运行态的容器终止，然后再重新启动它。
```


#删除

可以使用 docker container rm 来删除一个处于终止状态的容器。例如

```
$ docker container rm  trusting_newton
trusting_newton
```


如果要删除一个运行中的容器，可以添加 -f 参数。Docker 会发送 SIGKILL 信号给容器


#进入容器

	在使用 -d 参数时，容器启动后会进入后台。
	某些时候需要进入容器进行操作，包括使用 docker attach 命令或 docker exec (推荐)命令。

##exec 命令


	docker exec 后边可以跟多个参数。
	只用 -i 参数时，由于没有分配伪终端，界面没有我们熟悉的 Linux 命令提示符，但命令执行结果仍然可以返回。
	当 -i -t 参数一起使用时，则可以看到我们熟悉的 Linux 命令提示符。

```
$ docker run -dit ubuntu
69d137adef7a8a689cbcb059e94da5489d3cddd240ff675c640c8d96e84fe1f6
```

```
$ docker container ls
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
69d137adef7a        ubuntu:latest       "/bin/bash"         18 seconds ago      Up 17 seconds                           zealous_swirles
```

	
	如果从这个 stdin 中 exit，不会导致容器的停止。这就是为什么推荐大家使用 docker exec 的原因。

#导出和导入容器



