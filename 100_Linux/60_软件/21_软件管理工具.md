

软件管理机制
rpm
概述
rpm包名称分析
rpm常用的命令
dpkg

软件管理机制

Linux引入了软件管理机制进行软件包的安装、更新和卸载。
软件发行商需要在固定的操作系统平台上将需要安装或升级的软件及其相关软件打包成一个特殊格式的文件。这个软件包中包含了软件包描述文件，其提供了软件包的各种信息，例如软件包的名字、版本、类别、说明摘要、创建时要执行什么指令、安装时要执行什么操作，以及软件包所要包含的文件列表等等。用户得到了软件包并在系统中执行特定的命令后，软件包会根据内部的脚本检测需要的软件是否存在。若安装环境OK的话，安装工具就有条不紊地开展安装工作。在安装完成后安装工具还会将安装信息写入软件管理机制供今后升级、删除、查询与验证。
Linux系统上最通用的两个软件管理工具rpm和dpkg。


rpm
概述

RPM是”Redhat Package Manager”
rpm是由红帽公司开发的软件包管理方式，
使用rpm我们可以方便的进行软件的安装、查询、卸载、升级等工作。
但是rpm软件包之间的依赖性问题往往会很繁琐,尤其是软件由多个rpm包组成时。

RPM 是以一种数据库记录的方式来将你所需要的套件安装到你的Linux 主机的一套管理程序。也就是说，你的linux系统中存在着一个关于RPM的数据库，它记录了安装的包以及包与包之间依赖相关性。RPM包是预先在linux机器上编译好并打包好的文件，安装起来非常快捷。但是也有一些缺点，比如安装的环境必须与编译时的环境一致或者相当；包与包之间存在着相互依赖的情况；卸载包时需要先把依赖的包卸载掉，如果依赖的包是系统所必须的，那就不能卸载这个包，否则会造成系统崩溃。


rpm包名称分析
如果你的光驱中还有系统安装盘的话，你可以通过”mount /dev/cdrom /mnt”命令把光驱挂载到/mnt目录下，那么你会在/mnt/CentOS目录下看到很多.rpm的文件，这就是RPM包了。

每一个rpm包的名称都由”-“和”.”分成了若干部分。
就拿 a2ps-4.13b-57.2.el5.i386.rpm 这个包来解释一下，
a2ps 为包名；4.13b则为版本信息；57.2.el5为发布版本号；i386为运行平台。
其中运行平台常见的有i386, i586, i686, x86_64 ，需要你注意的是cpu目前是分32位和64位的，i386,i586和i686都为32位平台，x86_64则代表为64位的平台。另外有些rpm包并没有写具体的平台而是noarch，这代表这个rpm包没有硬件平台限制。例如 alacarte-0.10.0-1.fc6.noarch.rpm 。


rpm常用的命令

1）安装一个rpm包
-i ：安装的意思
-v ：可视化
-h ：显示安装进度
另外在安装一个rpm包时常用的附带参数有：
--force 强制安装，即使覆盖属于其他包的文件也要安装
--nodeps 当要安装的rpm包依赖其他包时，即使其他包没有安装，也要安装这个包

2）升级一个rpm包
rpm -Uvh filename -U ：即升级的意思

3）卸载一个rpm包
rpm -e filename 这里的filename是通过rpm的查询功能所查询到的，稍后会作介绍。

卸载时后边跟的filename和安装时的是有区别的。上面命令提到的 “|”在linux系统中用的非常多也非常有用，它是一个管道符，用来把前面运行的结果传递给后面的命令。以后会做详细介绍，而后出现的grep命令则是用来过滤某个关键词的工具，在后续章节中会做详细介绍。

4）查询一个包是否安装
rpm -q rpm包名（这里的包名，是不带有平台信息以及后缀名的）

如果加上了平台信息以及后缀名反而不能查出来。你还可以查询当前系统中所安装的所有rpm包。

因为太多，所以笔者列出前十个。

5）得到一个rpm包的相关信息
rpm -qi 包名 （同样不需要加平台信息与后缀名）


6）列出一个rpm包安装的文件
rpm -ql 包名

通过上面的命令可以看出vim是通过安装vim-enhanced-7.0.109-6.el5这个rpm包得来的。那么反过来如何通过一个文件去查找是由安装哪个rpm包得来的？

7）列出某一个文件属于哪个rpm包
rpm -qf 文件的绝对路径

前面讲过如何查找一个文件（可执行命令）的绝对路径

所以你也可以把这两条命令连起来写

看到了吗，which vim 这条命令是由两个反引号引起来的，这代表引用反引号里面的命令所产生的结果。关于rpm工具的使用还有很多内容，笔者就不一一列举了，只要你掌握上面这些内容，完全够你平时工作用的了。


dpkg
