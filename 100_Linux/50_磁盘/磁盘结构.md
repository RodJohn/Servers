


在讲连接档之前，需要你先理解inode的概念。什么是inode呢？这就需要你知道磁盘的整体构造。磁盘是有多个盘片（类似与光盘）重叠在一起构成的，而每个盘片上会有一个可以移动的磁头，这个磁头的作用就是用来读写数据的。磁头并不是一直在动，当磁头固定时，盘片转一圈，这一圈就是一个磁道了。很多个盘片同半径的那一圈的磁道总和称为磁柱。而由圆心向外画出直线，可以得到一个个扇区，如图二所示，一个扇区的物理量大约是 512 bytes ( 约 0.5K )。










知道了大体的硬盘构造之后，再来谈一谈怎么硬盘分割( partition )呢？
我们在进行硬盘分割的时候，最小都是以磁柱为单位进行分割的，那么分割完成之后自然就是格式化( format )啰，在 Linux 里面我们在进行格式化的时候必须要考虑到 Block 与 inode 的信息，这个 block 还好理解，他是我们磁盘可以记录的最小单位，是由数个 sector (扇区)所组成的，所以他的大小通常为 n*512 bytes ，例如 4K 。那么 inode (索引)是什么？ Block 是记录“档案内容数据”的地区，而 inode 则是记录“该档案的属性、及该档案放置在哪一个 Block 之内”的信息！所以，每个档案都会占用到至少一个 inode 。而当我们 Linux 系统要找到这个档案时，他会先去搜寻 inode table 找到这个档案的属性及数据放置的地区，然后再到数据去找到数据存放的 Block 进而将数据取出利用。这个 inode 数目在一开始就会被设定好，他的设定方式通常是利用 ( 硬盘大小 / 一个容量 )，这个容量至少应该比 Block 要大一些较佳，例如刚刚的 Block 订为 4K ，那么 inode 可以订为 8K 左右。所以，一颗 1GB 的硬盘，如果以 8K 来规划他的 inode 数时，他的 inode 就会有 131072 个 inode 啦！而一个 inode 的大小为 128 bytes 这么大！这么一来的话，我们就可以清楚的知道了，那就是一个 partition 格式化为一个 filesystem 之后，基本上，他一定会有 inode table 与 data area 两个区块，一个用来记录档案的信息与该档案放置的 block 区块，一个用来记录档案的内容！
由于我们 Linux 在读取数据的时候，是先查询 inode table 以得到数据是放在那个 Block 里面，然后再去该 Block 里面读取真正的数据内容！然后，那个 block 是我们在格式化硬盘的时候规定出来的一个值，这个 block 是由 2 的 n 次方个sector 所集结而成的！所以，他是 0.5K 的倍数！假设我们 block 规划为 4KBytes 好了，那么由于一个 inode 与一个block 最多均只纪录一个档案，所以，如果你的一个档案有 0.1 K bytes 这么大时，你要晓得的是，由于你的 block 为 4K bytes ，因此，你就会有 3.9 Kbytes 的空间浪费掉！所以，当你在格式化硬盘的时候，请千万注意到你的系统未来的使用方向。