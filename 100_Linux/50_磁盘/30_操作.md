
分区
格式化
磁盘检查
挂载与卸除
mount
umount
SWAP

分区

http://www.92csz.com/study/linux/8.htm

格式化


磁盘检查
语法： fsck [-Aar] [分区]
-A ：加该参数时，后不需要跟分区名作为参数。它会自动检查/etc/fstab 文件下的所有分区（开机过程中就会执行一次该操作）；
-a ：自动修复检查到有问题的分区；
-r ：当检查到有坏道的分区时会让用户决定是否修复。


当你使用fsck检查磁盘有无坏道时，会提示用户“跑这个任务可能会导致某些挂载的文件系统损坏”，所以这个命令不要轻易运行。否则真的遇到问题，系统甚至都不能启动了。


挂载与卸除

mount 
在挂载某个分区前需要先建立一个挂载点，这个挂载点是以目录的形式出现的。一旦把某一个分区挂载到了这个挂载点（目录）下，那么再往这个目录写数据使，则都会写到该分区中。
这就需要你注意一下，在挂载该分区前，挂载点（目录）下必须是个空目录。其实目录不为空并不影响所挂载分区的使用，但是一旦挂载上了，那么该目录下以前的东西就不能看到了。只有卸载掉该分区后才能看到。


开机挂载
系统启动时，需要挂载的各个分区。
/etc/fstab


这个文件是系统启动时，需要挂载的各个分区。第一列就是分区的label；第二列是挂载点；第三列是分区的格式；第四列则是mount的一些挂载参数，等下会详细介绍一下有哪些参数，一般情况下，直接写defaults即可；第五列的数字表示是否被dump备份，是的话这里就是1，否则就是0；第六列是开机时是否自检磁盘，就是刚才讲过的那个fsck检测。1，2都表示检测，0表示不检测，在Redhat中，这个1，2还有个说法，/ 分区必须设为1，而且整个fstab中只允许出现一个1，这里有一个优先级的说法。1比2优先级高，所以先检测1，然后再检测2，如果有多个分区需要开机检测那么都设置成2吧，1检测完了后会同时去检测2。下面该说说第四列中常用到的参数了。
async/sync ：async表示和磁盘和内存不同步，系统每隔一段时间把内存数据写入磁盘中，而sync则会时时同步内存和磁盘中数据；
auto/noauto ：开机自动挂载/不自动挂载；
default：按照大多数永久文件系统的缺省值设置挂载定义，它包含了rw, suid, dev, exec, auto, nouser,async ；
ro：按只读权限挂载 ；
rw：按可读可写权限挂载 ；
exec/noexec ：允许/不允许可执行文件执行，但千万不要把根分区挂载为noexec，那就无法使用系统了，连mount命令都无法使用了，这时只有重新做系统了；
user/nouser ：允许/不允许root外的其他用户挂载分区，为了安全考虑，请用nouser ；
suid/nosuid ：允许/不允许分区有suid属性，一般设置nosuid ；
usrquota ：启动使用者磁盘配额模式，磁盘配额相关内容在后续章节会做介绍；
grquota ：启动群组磁盘配额模式；
学完这个/etc/fstab后，我们就可以自己修改这个文件，增加一行来挂载新增分区。例如，笔者增加了这样一行
/dev/hdb1 /test1 ext3 defaults 0 0
那么系统再重启时就会挂载这个分区了。


你可以使用mount -o 选项来重新挂载一个分区，并同时指定你想要的选项（即上边介绍fstab第六列中那些）
看到了吧，使用了ro选项，则不能新建文件了。




umount 

umount，后边可以跟挂载点，也可以跟分区名(/dev/hdb1)

有时也许你会遇到比较难卸载的设备，就像在windows下无法删除U盘一样，教你一个特管用的方法就是 umount -l /dev/hdb1 ，这个-l选项有强制卸载的意思，你一定要记住哦，非常有用的。



SWAP

【建立一个swap文件】从装系统时就接触过这个swap了，前面也说过它类似与windows的虚拟内存，分区的时候一般大小为内存的2倍，如果你的内存超过4G，那么你分8G似乎是没有必要了。分4G足够日常交换了